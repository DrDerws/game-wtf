[gd_scene load_steps=10 format=3 uid="uid://cqd5nwd6el7tp"]

[ext_resource type="Script" path="res://scripts/Campfire.gd" id="1"]

[sub_resource type="CylinderMesh" id="1"]
	radius = 0.5
	height = 0.2

[sub_resource type="SphereMesh" id="2"]
	radius = 0.18

[sub_resource type="StandardMaterial3D" id="3"]
	albedo_color = Color(0.2, 0.1, 0.05, 1.0)
	roughness = 0.95

[sub_resource type="StandardMaterial3D" id="4"]
	albedo_color = Color(1, 0.5, 0.2, 1.0)
	emission_enabled = true
	emission = Color(1, 0.4, 0.1, 1.0)
	emission_energy = 1.4

[sub_resource type="ParticleProcessMaterial" id="5"]
	emission_shape = 1
	emission_box_extents = Vector3(0.2, 0.1, 0.2)
	gravity = Vector3(0, 0.8, 0)
	initial_velocity = 0.8
	angle = 15.0
	scale = 0.2
	scale_random = 0.4
	color = Color(1, 0.6, 0.2, 1.0)

[sub_resource type="ParticleProcessMaterial" id="6"]
	emission_shape = 1
	emission_box_extents = Vector3(0.2, 0.1, 0.2)
	gravity = Vector3(0, 1.2, 0)
	initial_velocity = 0.5
	angle = 10.0
	scale = 0.3
	scale_random = 0.6
	color = Color(0.35, 0.35, 0.35, 0.6)

[sub_resource type="ParticleProcessMaterial" id="8"]
	emission_shape = 1
	emission_box_extents = Vector3(0.15, 0.05, 0.15)
	gravity = Vector3(0, 1.6, 0)
	initial_velocity = 2.0
	angle = 25.0
	scale = 0.12
	scale_random = 0.5
	color = Color(1, 0.7, 0.3, 1.0)

[sub_resource type="QuadMesh" id="7"]
	size = Vector2(0.15, 0.15)

[node name="Campfire" type="Node3D"]
	script = ExtResource("1")

[node name="Base" type="MeshInstance3D" parent="."]
	mesh = SubResource("1")
	material_override = SubResource("3")

[node name="Ember" type="MeshInstance3D" parent="."]
	mesh = SubResource("2")
	position = Vector3(0, 0.15, 0)
	material_override = SubResource("4")

[node name="FlameParticles" type="GPUParticles3D" parent="."]
	amount = 80
	lifetime = 1.2
	process_material = SubResource("5")
	draw_pass_1 = SubResource("7")
	position = Vector3(0, 0.3, 0)
	visibility_aabb = AABB(-1, -1, -1, 2, 2, 2)

[node name="SmokeParticles" type="GPUParticles3D" parent="."]
	amount = 50
	lifetime = 3.0
	process_material = SubResource("6")
	draw_pass_1 = SubResource("7")
	position = Vector3(0, 0.6, 0)
	visibility_aabb = AABB(-2, -2, -2, 4, 4, 4)

[node name="SparksParticles" type="GPUParticles3D" parent="."]
	amount = 40
	lifetime = 0.5
	one_shot = true
	process_material = SubResource("8")
	draw_pass_1 = SubResource("7")
	position = Vector3(0, 0.35, 0)
	visibility_aabb = AABB(-1, -1, -1, 2, 2, 2)

[node name="FireLight" type="OmniLight3D" parent="."]
	light_color = Color(1, 0.6, 0.3, 1.0)
	light_energy = 2.8
	omni_range = 9.0
	position = Vector3(0, 0.8, 0)

[node name="IgnitePlayer" type="AudioStreamPlayer3D" parent="."]
	volume_db = -8.0
	position = Vector3(0, 0.2, 0)
